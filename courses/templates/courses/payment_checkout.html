{% extends "base.html" %}
{% block title %}Checkout | SkillBridge{% endblock %}

{% block content %}
<style>
    .glass {
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(14px);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }
</style>

<div class="max-w-4xl mx-auto pt-12 pb-20 px-6">

    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center">Secure Checkout</h1>

    <div class="grid md:grid-cols-2 gap-8">

        <!-- ORDER SUMMARY -->
        <div class="glass rounded-3xl p-8 shadow-xl h-fit">
            <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200 mb-6">Order Summary</h2>

            <div class="space-y-4">
                <div class="flex justify-between items-center text-gray-700 dark:text-gray-300">
                    <span class="font-medium">Course</span>
                    <span class="font-bold text-gray-900 dark:text-white">{{ course.title }}</span>
                </div>

                <div class="flex justify-between items-center text-gray-700 dark:text-gray-300">
                    <span class="font-medium">Plan Duration</span>
                    <span>{{ plan }} Days</span>
                </div>

                <div class="border-t border-gray-300/50 dark:border-gray-700/50 my-4"></div>

                <div class="flex justify-between items-center text-xl font-bold text-gray-900 dark:text-white">
                    <span>Total</span>
                    <span>₹{{ price }}</span>
                </div>
            </div>

            <div class="mt-8 p-4 bg-blue-50/50 rounded-xl text-sm text-blue-800">
                You are paying for a {{ plan }}-day listing visibility plan. The course will be activated immediately
                after payment.
            </div>
        </div>

        <!-- PAYMENT FORM -->
        <div class="glass rounded-3xl p-8 shadow-xl">
            <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200 mb-6">Payment Details</h2>

            <form method="POST" action="{% url 'payment_checkout' course.id %}">
                {% csrf_token %}
                <input type="hidden" name="plan" value="{{ plan }}">

                <div class="space-y-5">

                    <!-- Cardholder Name -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Cardholder
                            Name</label>
                        <input type="text" placeholder="John Doe" required
                            class="w-full px-4 py-3 rounded-xl border bg-white/50 dark:bg-gray-800/50 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>

                    <!-- Card Number -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Card
                            Number</label>
                        <div class="relative">
                            <input type="text" placeholder="0000 0000 0000 0000" maxlength="19" required
                                class="w-full pl-12 pr-4 py-3 rounded-xl border bg-white/50 dark:bg-gray-800/50 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none font-mono">
                            <svg class="w-6 h-6 text-gray-400 absolute left-3 top-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <rect x="2" y="5" width="20" height="14" rx="2" stroke-width="2" />
                                <line x1="2" y1="10" x2="22" y2="10" stroke-width="2" />
                            </svg>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <!-- Expiery -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Expiry
                                Date</label>
                            <input type="text" placeholder="MM/YY" maxlength="5" required
                                class="w-full px-4 py-3 rounded-xl border bg-white/50 dark:bg-gray-800/50 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-center">
                        </div>

                        <!-- CVV -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">CVV</label>
                            <input type="password" placeholder="123" maxlength="3" required
                                class="w-full px-4 py-3 rounded-xl border bg-white/50 dark:bg-gray-800/50 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none text-center">
                        </div>
                    </div>

                </div>

                <button type="submit" name="process_payment"
                    class="mt-8 w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:scale-[1.02] transition">
                    Pay ₹{{ price }}
                </button>

                <p class="text-center text-xs text-gray-500 mt-4">
                    <span class="inline-flex items-center gap-1">
                        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14h2v2h-2zm0-10h2v8h-2z" />
                        </svg>
                        Encrypted & Secure
                    </span>
                </p>

            </form>
        </div>

    </div>
</div>
{% endblock %}